<form id="myForm">
  <input name="myFile" type="file" />
  <button onclick="fUpload(this.parentNode)">UPLOAD</button>
</form>
<div id="message"></div>
<script>
  // Upload handler
  const fUpload = fObject => {
    const raw = fObject.myFile.files[0];
    const fr = new FileReader();
    fr.onload = e => {
      const obj = {
        mimeType: raw.type,
        bytes: [...new Int8Array(e.target.result)], // Convert received data to a byte array
      };
      google.script.run
        .withSuccessHandler(onSuccess)
        .withFailureHandler(onFailure)
        .stUploaderV8(obj);
    };
    fr.readAsArrayBuffer(raw);
    document.querySelector('#myForm').style.display = 'none';
    document.querySelector('#message').innerHTML = 'UPLOAD...';
  };

  // Success handler
  function onSuccess() {
    google.script.host.close();
  }

  // Failure handler
  function onFailure(e) {
    document.querySelector('#message').innerHTML = `ERROR! ${e.message}`;
  }
</script>
